"use strict";const o=require("../common/vendor.js"),a=e=>(e=`https://open.feishu.cn${e}`,e),r="cli_a6d43e244ceb100b",i="f76i5lak9WFyoqFFFNQMneYWlOW3Nub8",s=async()=>{const e={data:""},n=await u({app_id:r,app_secret:i});return await o.uni.setStorage({key:"autoToken",data:`Bearer ${n.data.tenant_access_token}`}),e.data=`Bearer ${n.data.tenant_access_token}`,e.data},u=async e=>{try{const t=a("/open-apis/auth/v3/tenant_access_token/internal");return await o.uni.request({url:t,method:"POST",data:e})}catch(t){console.log("e----",t)}},h=async e=>{try{const t=await s();console.log("getAutoToken---------",t);const n={grant_type:"authorization_code",code:e},c=a("/open-apis/authen/v1/oidc/access_token");return await o.uni.request({url:c,method:"POST",data:n,header:{Authorization:t}})}catch(t){console.log("e----",t)}},d=async e=>{try{const t=a("/open-apis/authen/v1/user_info");return await o.uni.request({url:t,method:"GET",header:{Authorization:`Bearer ${e}`}})}catch(t){console.log("e----",t)}},g=async e=>{try{const t=await s(),n=a(`/open-apis/contact/v3/users/${e}`);return await o.uni.request({url:n,method:"GET",header:{Authorization:t}})}catch(t){console.log("e----",t)}},p=async()=>{try{const e=await s(),t=a("/open-apis/tenant/v2/tenant/query");return await o.uni.request({url:t,method:"GET",header:{Authorization:e}})}catch(e){console.log("e----",e)}},l=async e=>{try{const t=await s(),n=a(`/open-apis/corehr/v1/departments/${e}`);return await o.uni.request({url:n,method:"GET",header:{Authorization:t}})}catch(t){console.log("e----",t)}};exports.getAccessToken=h;exports.getAutoToken=s;exports.getDepartmentInfo=l;exports.getOpenId=d;exports.getTenantInfo=p;exports.getUserInfo=g;
